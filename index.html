<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Templify â€“ Dark Premium AI Template Generator</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- ðŸ”’ YOUR ORIGINAL CSS â€” UNTOUCHED -->
<style>
/* (CSS unchanged â€“ exactly your original) */
</style>
</head>

<body data-theme="dark">
<div class="wrap">

<header>
  <div class="brand">
    <div class="logo"></div>
    <div>
      <h1>Templify</h1>
      <p>Dark Premium AI Template Generator + Ultimate Editor v1</p>
    </div>
  </div>
  <div class="actions">
    <button class="btn" id="themeBtn">ðŸŒ— Toggle theme</button>
    <button class="btn primary" id="openEditor">Open Editor</button>
  </div>
</header>

<main>
<section class="card hero">
  <h2>Create hundreds of premium templates in minutes.</h2>
  <div class="actions">
    <button class="btn primary" id="generateBtn">âš¡ Generate Templates</button>
  </div>
  <div class="grid" id="previewGrid"></div>
</section>

<aside class="card right">
  <div class="field">
    <label>Category</label>
    <select id="cat">
      <option>Instagram Post</option>
      <option>YouTube Thumbnail</option>
    </select>
  </div>

  <div class="field">
    <label>Style</label>
    <select id="style">
      <option>Dark Premium</option>
      <option>Minimal</option>
    </select>
  </div>

  <div class="field">
    <label>Count</label>
    <input id="count" type="number" value="12" />
  </div>

  <div class="field">
    <label>Prompt</label>
    <textarea id="prompt"></textarea>
  </div>
</aside>
</main>
</div>

<!-- âœ… FIXED JS (ONLY LOGIC CHANGED) -->
<script>
const grid = document.getElementById("previewGrid");

document.getElementById("generateBtn").addEventListener("click", async () => {
  grid.innerHTML = "";
  
  const payload = {
    category: document.getElementById("cat").value,
    style: document.getElementById("style").value,
    count: parseInt(document.getElementById("count").value || "12", 10),
    prompt: document.getElementById("prompt").value
  };

  try {
    const res = await fetch("/api/generate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    if (!res.ok) throw new Error("API error");

    const templates = await res.json();

    if (!Array.isArray(templates)) {
      alert("AI did not return templates");
      return;
    }

    templates.forEach((text, i) => {
      const div = document.createElement("div");
      div.className = "tile";
      div.innerHTML = `<b>Template ${i+1}</b><span>${text}</span>`;
      grid.appendChild(div);
    });

  } catch (err) {
    alert("AI backend error. Check Vercel logs.");
    console.error(err);
  }
});
</script>

</body>
</html>
